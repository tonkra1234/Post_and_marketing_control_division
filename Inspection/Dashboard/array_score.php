<?php

$private_2020 = array (
    0 => '97.22',
    1 => '83.49',
    2 => '80.21',
    3 => '100.00',
    4 => '82.99',
    5 => '79.30',
    6 => '100.00',
    7 => '100.00',
    8 => '100.00',
    9 => '100.00',
    10 => '100.00',
    11 => '100.00',
    12 => '72.92',
    13 => '100.00',
    14 => '100.00',
    15 => '100.00',
    16 => '100.00',
    17 => '100.00',
    18 => '100.00',
    19 => '100.00',
    20 => '100.00',
    21 => '100.00',
    22 => '100.00',
    23 => '100.00',
    24 => '100.00',
    25 => '98.08',
    26 => '100.00',
    27 => '100.00',
    28 => '100.00',
    29 => '100.00',
    30 => '100.00',
    31 => '100.00',
    32 => '100.00',
    33 => '100.00',
    34 => '100.00',
    35 => '100.00',
    36 => '100.00',
    37 => '100.00',
    38 => '100.00',
    39 => '100.00',
    40 => '100.00',
    41 => '100.00',
    42 => '100.00',
    43 => '84.70',
    44 => '100.00',
    45 => '100.00',
    46 => '100.00',
    47 => '100.00',
    48 => '98.08',
    49 => '100.00',
    50 => '100.00',
    51 => '100.00',
    52 => '100.00',
    53 => '97.22',
    54 => '85.76',
    55 => '100.00',
    56 => '100.00',
    57 => '100.00',
    58 => '100.00',
    59 => '100.00',
    60 => '100.00',
    61 => '100.00',
    62 => '100.00',
    63 => '96.88',
    64 => '100.00',
    65 => '100.00',
    66 => '100.00',
    67 => '100.00',
    68 => '100.00',
    69 => '91.67',
    70 => '100.00',
    71 => '100.00',
    72 => '100.00',
    73 => '96.88',
    74 => '100.00',
    75 => '98.08',
    76 => '100.00',
    77 => '100.00',
    78 => '100.00',
    79 => '100.00',
    80 => '100.00',
    81 => '100.00',
    82 => '100.00',
    83 => '100.00',
);

$private_2021 = array (
    0 => '100.00',
    1 => '100.00',
    2 => '100.00',
    3 => '96.43',
    4 => '96.43',
    5 => '100.00',
    6 => '100.00',
    7 => '83.33',
    8 => '100.00',
    9 => '94.23',
    10 => '100.00',
    11 => '98.08',
    12 => '100.00',
    13 => '100.00',
    14 => '100.00',
    15 => '100.00',
    16 => '100.00',
    17 => '100.00',
    18 => '100.00',
    19 => '91.67',
    20 => '100.00',
    21 => '100.00',
    22 => '100.00',
    23 => '100.00',
    24 => '100.00',
    25 => '100.00',
    26 => '100.00',
    27 => '100.00',
    28 => '100.00',
    29 => '100.00',
    30 => '91.67',
    31 => '91.67',
    32 => '94.23',
    33 => '97.22',
    34 => '74.31',
    35 => '97.22',
    36 => '100.00',
    37 => '100.00',
    38 => '100.00',
    39 => '72.73',
    40 => '66.83',
);

$government_2020 = array (
    0 => '92.05',
    1 => '96.36',
    2 => '84.39',
    3 => '100.00',
    4 => '89.00',
    5 => '95.00',
    6 => '100.00',
    7 => '100.00',
    8 => '90.56',
    9 => '97.50',
    10 => '100.00',
    11 => '96.67',
    12 => '96.67',
    13 => '93.03',
    14 => '92.35',
    15 => '100.00',
    16 => '100.00',
    17 => '100.00',
    18 => '100.00',
    19 => '100.00',
    20 => '100.00',
    21 => '94.55',
    22 => '95.68',
    23 => '86.36',
    24 => '96.36',
    25 => '83.18',
    26 => '98.18',
    27 => '89.70',
    28 => '92.35',
    29 => '100.00',
    30 => '100.00',
    31 => '90.53',
    32 => '98.18',
    33 => '87.35',
    34 => '91.36',
    35 => '92.50',
    36 => '95.68',
    37 => '92.73',
    38 => '98.18',
    39 => '98.18',
    40 => '87.27',
    41 => '98.18',
    42 => '98.18',
    43 => '89.09',
    44 => '94.85',
    45 => '100.00',
    46 => '100.00',
    47 => '93.18',
    48 => '93.18',
    49 => '95.00',
    50 => '89.85',
    51 => '100.00',
    52 => '100.00',
    53 => '100.00',
    54 => '100.00',
    55 => '96.36',
    56 => '100.00',
);

$government_2021 = array (
    0 => '95.68',
    1 => '100.00',
    2 => '97.50',
    3 => '100.00',
    4 => '100.00',
    5 => '98.18',
    6 => '96.36',
    7 => '93.03',
    8 => '93.03',
    9 => '94.55',
    10 => '97.50',
    11 => '97.50',
    12 => '97.50',
    13 => '97.50',
    14 => '93.86',
    15 => '97.50',
    16 => '96.67',
    17 => '98.18',
    18 => '96.67',
    19 => '97.50',
    20 => '92.35',
    21 => '93.18',
    22 => '94.85',
    23 => '100.00',
    24 => '93.86',
    25 => '100.00',
    26 => '100.00',
    27 => '100.00',
    28 => '95.68',
    29 => '95.68',
    30 => '98.18',
    31 => '95.68',
    32 => '96.36',
    33 => '95.68',
    34 => '93.03',
    35 => '98.18',
    36 => '89.55',
    37 => '98.18',
    38 => '96.36',
    39 => '95.68',
    40 => '92.05',
    41 => '98.18',
    42 => '95.68',
    43 => '98.18',
    44 => '92.73',
    45 => '98.18',
    46 => '98.18',
    47 => '98.18',
    48 => '98.18',
    49 => '98.18',
    50 => '95.68',
    51 => '98.18',
    52 => '98.18',
    53 => '98.18',
    54 => '98.18',
    55 => '95.68',
    56 => '100.00',
    57 => '100.00',
    58 => '100.00',
    59 => '98.18',
    60 => '98.18',
    61 => '94.55',
    62 => '97.50',
    63 => '97.50',
    64 => '90.53',
    65 => '91.67',
    66 => '93.18',
    67 => '93.03',
    68 => '94.85',
    69 => '98.18',
    70 => '91.36',
    71 => '94.85',
    72 => '93.18',
    73 => '96.36',
    74 => '96.36',
    75 => '90.53',
    76 => '96.36',
    77 => '89.55',
    78 => '88.71',
    79 => '93.86',
    80 => '97.50',
    81 => '98.18',
    82 => '92.35',
    83 => '98.18',
    84 => '95.00',
    85 => '94.85',
    86 => '90.68',
    87 => '96.67',
    88 => '100.00',
    89 => '98.18',
    90 => '98.18',
    91 => '97.50',
    92 => '97.50',
    93 => '100.00',
    94 => '96.36',
    95 => '100.00',
    96 => '97.50',
    97 => '100.00',
    98 => '92.50',
    99 => '100.00',
    100 => '92.73',
    101 => '83.03',
);

$result_check = $db->result_check();

$result_count_array = $db->result_count_array();
$Arr=[];
foreach ($result_check as $row){
    for ($i=1; $i < 44; $i++) { 
        if($row['question'.$i.'_ask'] === 'No'){
            array_push($Arr, $i);
        }
    }
};
$number_q =(43*$result_count_array[0]['sum']);
$governmnet_2022 = number_format(100-((count($Arr)/($number_q))*100),1);

$result_check_pri = $db->result_check_pri();
$result_count_array_pri = $db->result_count_array_pri();

$Arr_pri=[];
foreach ($result_check_pri as $row ){
    for ($i=1; $i < 35; $i++) { 
        if($row['question'.$i.'_ask'] === 'No'){
            array_push($Arr_pri, $i);
        }
    }
};
$number_q_pri =(34*$result_count_array_pri[0]['sum']);
$private_2022 = number_format(100-((count($Arr_pri)/($number_q_pri))*100),1);

$result_check_g_now = $db->result_check_g_now();
$Number_g_now=[];
$total_question_g_now = [];
foreach ($result_check_g_now as $row ){
    for ($i=1; $i <= count(json_decode($row['check_list'])); $i++) { 
        array_push($total_question_g_now, $i);
        if((json_decode($row['check_list']))[$i-1][0] === 'No'){
            array_push($Number_g_now, $i-1);
        }
    }
};

$total_number_g_now = count($result_check_g_now)*count($total_question_g_now );
if ($total_number_g_now === 0) {
    $total_number_g_now = 1;
} else {
    $total_number_g_now = count($result_check_g_now)*count($total_question_g_now );
}
$government_score_2023 = number_format(100-((count($Number_g_now)/($total_number_g_now))*100),1);

$result_check_p_now = $db->result_check_p_now();
$Number_p_now=[];
$total_question_p_now = [];
foreach ($result_check_p_now as $row ){
    for ($i=1; $i <= count(json_decode($row['check_list'])); $i++) { 
        array_push($total_question_p_now, $i);
        if((json_decode($row['check_list']))[$i-1][0] === 'No'){
            array_push($Number_p_now, $i-1);
        }
    }
};

$total_number_p_now = count($result_check_p_now)*count($total_question_p_now );
if ($total_number_p_now === 0) {
    $total_number_p_now = 1;
} else {
    $total_number_p_now = count($result_check_p_now)*count($total_question_p_now );
}
$private_score_2023 = number_format(100-((count($Number_p_now)/($total_number_p_now))*100),1);

$result_check_g_2024 = $db->result_check_g_2024();
$Number_g_2024=[];
$total_question_g_2024 = [];
foreach ($result_check_g_2024 as $row ){
    for ($i=1; $i <= count(json_decode($row['check_list'])); $i++) { 
        array_push($total_question_g_2024, $i);
        if((json_decode($row['check_list']))[$i-1][0] === 'No'){
            array_push($Number_g_2024, $i-1);
        }
    }
};

$total_number_g_2024 = count($result_check_g_2024)*count($total_question_g_2024 );
if ($total_number_g_2024 === 0) {
    $total_number_g_2024 = 1;
} else {
    $total_number_g_2024 = count($result_check_g_2024)*count($total_question_g_2024 );
}
$government_score_2024 = number_format(100-((count($Number_g_2024)/($total_number_g_2024))*100),1);

$result_check_p_2024 = $db->result_check_p_2024();
$Number_p_2024=[];
$total_question_p_2024 = [];
foreach ($result_check_p_2024 as $row ){
    for ($i=1; $i <= count(json_decode($row['check_list'])); $i++) { 
        array_push($total_question_p_2024, $i);
        if((json_decode($row['check_list']))[$i-1][0] === 'No'){
            array_push($Number_p_2024, $i-1);
        }
    }
};

$total_number_p_2024 = count($result_check_p_2024)*count($total_question_p_2024 );
if ($total_number_p_2024 === 0) {
    $total_number_p_2024 = 1;
} else {
    $total_number_p_2024 = count($result_check_p_2024)*count($total_question_p_2024 );
}
$private_score_2024 = number_format(100-((count($Number_p_2024)/($total_number_p_2024))*100),1);


$private_score_2024 = $private_score_2024;
$government_score_2024 = $government_score_2024;

$label_score = ['Private','Government'];
// $score = [number_format(array_sum($private_2020)/count($private_2020),1),number_format(array_sum($private_2021)/count($private_2021),1),$private_2022,$government_score_2023,number_format(array_sum($government_2020)/count($government_2020),1),number_format(array_sum($government_2021)/count($government_2021),1),$governmnet_2022,$private_score_2023 ];
$score_2020 = [number_format(array_sum($private_2020)/count($private_2020),1),number_format(array_sum($government_2020)/count($government_2020),1)];
$score_2021 = [number_format(array_sum($private_2021)/count($private_2021),1),number_format(array_sum($government_2021)/count($government_2021),1)];
$score_2022 = [$private_2022,$governmnet_2022];
$score_2023 = [$private_score_2023,$government_score_2023];
$score_2024 = [$private_score_2024,$government_score_2024];
?>